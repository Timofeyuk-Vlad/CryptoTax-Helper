# Требования к проекту
---

# Содержание
1 [Введение](#intro)  
1.1 [Назначение](#appointment)  
1.2 [Бизнес-требования](#business_requirements)  
1.2.1 [Исходные данные](#initial_data)  
1.2.2 [Возможности бизнеса](#business_opportunities)  
1.2.3 [Границы проекта](#project_boundary)  
1.3 [Аналоги](#analogues)  
2 [Требования пользователя](#user_requirements)  
2.1 [Программные интерфейсы](#software_interfaces)  
2.2 [Интерфейс пользователя](#user_interface)  
2.3 [Характеристики пользователей](#user_specifications)  
2.3.1 [Классы пользователей](#user_classes)  
2.3.2 [Аудитория приложения](#application_audience)  
2.3.2.1 [Целевая аудитория](#target_audience)  
2.3.2.2 [Побочная аудитория](#collateral_audience)  
2.4 [Предположения и зависимости](#assumptions_and_dependencies)  
3 [Системные требования](#system_requirements)  
3.1 [Функциональные требования](#functional_requirements)  
3.1.1 [Основные функции](#main_functions)  
3.1.1.1 [Вход пользователя в приложение](#user_logon_to_the_application)  
3.1.1.2 [Настройка налогового профиля](#setting_up_tax_profile)  
3.1.1.3 [Подключение к криптобиржам](#exchange_connection)  
3.1.1.4 [Импорт транзакций](#import_transactions)  
3.1.1.5 [Расчет налогов](#tax_calculation)  
3.1.1.6 [Генерация отчетов](#report_generation)  
3.1.1.7 [Экспорт документов](#export_documents)  
3.1.1.8 [Выход пользователя из учётной записи](#user_logout)  
3.1.2 [Ограничения и исключения](#restrictions_and_exclusions)  
3.2 [Нефункциональные требования](#non-functional_requirements)  
3.2.1 [Атрибуты качества](#quality_attributes)  
3.2.1.1 [Требования к удобству использования](#requirements_for_ease_of_use)    
3.2.1.2 [Требования к безопасности](#security_requirements)  
3.2.1.3 [Требования к производительности](#performance_requirements)  
3.2.1.4 [Требования к доступности](#access_requirements)  
3.2.2 [Внешние интерфейсы](#external_interfaces)  
3.2.3 [Ограничения](#restrictions)

<a name="intro"/>

# 1 Введение

<a name="appointment"/>

## 1.1 Назначение
В этом документе описаны функциональные и нефункциональные требования к веб-приложению «CryptoTax Helper» для автоматического расчета налогов с операций с криптовалютами в России и Беларуси. Этот документ предназначен для команды, которая будет реализовывать и проверять корректность работы приложения.

<a name="business_requirements"/>

## 1.2 Бизнес-требования

<a name="initial_data"/>

### 1.2.1 Исходные данные
Большое количество граждан России и Беларуси вкладывает средства в криптовалюты. С 2025 года в России действует новое налоговое законодательство (ФЗ-418 от 29.11.2024), согласно которому все операции с цифровыми активами облагаются НДФЛ по ставке 13% до 2,4 млн рублей и 15% свыше этой суммы. В Беларуси с 2025 года также введено обязательное декларирование доходов от цифровых активов с подоходным налогом 13% (с льготами до 10 000 BYN в год). При этом большинство пользователей не понимают, как правильно рассчитать налоги, какие операции подлежат декларированию и какие документы необходимы для налоговых органов. Отсутствие специализированных инструментов для белорусско-российского рынка создает серьезные проблемы для криптоинвесторов.

<a name="business_opportunities"/>

### 1.2.2 Возможности бизнеса
Многие люди желают иметь приложение, которое позволит автоматически рассчитывать налоги с криптовалютных операций согласно законодательству РФ и РБ, не обладая глубокими знаниями в налогообложении. Подобное приложение позволит им экономить время на расчетах, избегать ошибок при подаче деклараций и быть уверенными в соблюдении налогового законодательства. Интеграция с популярными криптобиржами и автоматическая генерация отчетов для налоговых органов значительно упростит процесс декларирования доходов. Дополнительно, поддержка обеих юрисдикций расширит рынок потенциальных пользователей.

<a name="project_boundary"/>

### 1.2.3 Границы проекта
Веб-приложение «CryptoTax Helper» позволит пользователям из России и Беларуси:
- Выбирать налоговую юрисдикцию (РФ или РБ) при настройке профиля
- Подключаться к основным криптобиржам через безопасные read-only API
- Автоматически импортировать полную историю торговых операций
- Рассчитывать налогооблагаемую базу согласно актуальному законодательству РФ и РБ
- Генерировать готовые справки для подачи в ФНС России и Налоговый комитет РБ
- Отслеживать криптовалютный портфель в реальном времени
- Экспортировать все документы в PDF формате для налоговых органов

<a name="analogues"/>

## 1.3 Аналоги
Основными аналогами являются зарубежные приложения: Koinly, CoinTracker, Blockpit, CryptoTaxCalculator, Recap.io. Особенностью этих аналогов является ориентация на западные юрисдикции (США, ЕС, Австралия) и полное отсутствие поддержки российского и белорусского налогового законодательства. Главные недостатки существующих решений:
- Отсутствие поддержки ФЗ-418 и налогового законодательства РБ
- Только англоязычный интерфейс без русской локализации
- Не учитывают особенности российских и белорусских криптобирж
- Не работают с рублем и белорусским рублем как базовыми валютами
- Высокая стоимость подписки для российского рынка

<a name="user_requirements"/>

# 2 Требования пользователя

<a name="software_interfaces"/>

## 2.1 Программные интерфейсы
Приложение интегрируется со следующими внешними системами:
- **API криптобирж**: Binance, ByBit, OKX, Huobi, KuCoin для импорта торговой истории
- **API курсов валют**: CoinGecko, CoinMarketCap для получения исторических цен криптовалют
- **API ЦБ РФ**: для получения официальных курсов рубля к доллару и евро
- **API НБ РБ**: для получения курсов белорусского рубля к основным валютам
- **Блокчейн API**: Etherscan, BSCScan, Polygonscan для получения данных о DeFi транзакциях
- **Перспективные интеграции**: API ФНС России и API Налогового комитета РБ для прямой подачи деклараций

<a name="user_interface"/>

## 2.2 Интерфейс пользователя

### Экран регистрации и входа
![Регистрация и вход](./mockups/registration-login.png)

### Экран двухфакторной аутентификации
![Двухфакторная аутентификация](./mockups/2fa-authentication.png)

### Настройка налогового профиля
![Настройка профиля](./mockups/tax-profile-setup.png)

### Подключение к биржам
![Подключение к биржам](./mockups/exchange-connection.png)

### Дашборд портфеля
![Дашборд портфеля](./mockups/dashboard-portfolio.png)

### История транзакций
![История транзакций](./mockups/transaction-history.png)

### Расчет налогов
![Расчет налогов](./mockups/tax-calculation.png)

### Генерация отчетов
![Генерация отчетов](./mockups/report-generation.png)

### Настройки аккаунта
![Настройки аккаунта](./mockups/account-settings.png)

<a name="user_specifications"/>

## 2.3 Характеристики пользователей

<a name="user_classes"/>

### 2.3.1 Классы пользователей

| Класс пользователей | Описание | Налоговая ставка | Особенности |
|:---|:---|:---|:---|
| Физические лица - резиденты РФ | Граждане России, инвестирующие в криптовалюты | НДФЛ 13%/15% | Обязательны к декларированию согласно ФЗ-418 |
| Физические лица - резиденты РБ | Граждане Беларуси с цифровыми активами | 13% подоходный налог | Льгота до 10 000 BYN/год |
| ИП России | Индивидуальные предприниматели РФ | УСН 6%/15% или НДФЛ | Криптовалюта как предпринимательский доход |
| ИП Беларуси | Индивидуальные предприниматели РБ | Зависит от режима | Особый порядок учета цифровых активов |
| Малые предприятия | Юридические лица РФ и РБ | Налог на прибыль 25%/18% | Корпоративный учет операций |

<a name="application_audience"/>

### 2.3.2 Аудитория приложения

<a name="target_audience"/>

#### 2.3.2.1 Целевая аудитория
- **Частные криптоинвесторы** из России и Беларуси в возрасте 25-45 лет
- **Активные трейдеры** на международных криптобиржах
- **ИП и малые предприятия**, принимающие криптовалюты в качестве оплаты
- **IT-специалисты**, получающие зарплату в криптовалютах

<a name="collateral_audience"/>

#### 2.3.2.2 Побочная аудитория
- **Бухгалтеры и аудиторы**, ведущие учет криптовалютных операций
- **Налоговые консультанты** и юристы по криптовалютному праву
- **Финансовые советники**, работающие с криптоинвесторами
- **Семьи инвесторов**, нуждающиеся в семейном налогом планировании

<a name="assumptions_and_dependencies"/>

## 2.4 Предположения и зависимости
1. **Стабильность законодательства**: Предполагается, что налоговое законодательство РФ и РБ останется относительно стабильным в течение года
2. **Доступность API бирж**: Работа приложения критически зависит от стабильности API криптобирж
3. **Интернет-соединение**: Все функции требуют постоянного подключения к интернету
4. **Точность курсов**: Корректность расчетов зависит от качества данных внешних провайдеров курсов
5. **Права доступа**: Пользователи должны иметь полные права на свои торговые данные на биржах

<a name="system_requirements"/>

# 3 Системные требования

<a name="functional_requirements"/>

## 3.1 Функциональные требования

<a name="main_functions"/>

### 3.1.1 Основные функции

<a name="user_logon_to_the_application"/>

#### 3.1.1.1 Вход пользователя в приложение
**Описание.** Пользователь должен пройти безопасную аутентификацию для доступа к налоговым данным.

| Функция | Требования | 
|:---|:---|
| Регистрация нового пользователя | Приложение должно запросить email, надежный пароль (минимум 8 символов, включая буквы, цифры, спецсимволы) и подтверждение. Система отправляет email с подтверждением регистрации |
| Двухфакторная аутентификация | Обязательная настройка 2FA через TOTP приложения (Google Authenticator, Authy) или SMS для доступа к налоговым данным |
| Аутентификация пользователя | Поддержка входа по email/паролю с обязательным вводом кода 2FA. Блокировка аккаунта на 1 час после 5 неудачных попыток |
| Восстановление пароля | Безопасный сброс пароля через подтвержденный email с временной ссылкой действительной 1 час |

<a name="setting_up_tax_profile"/>

#### 3.1.1.2 Настройка налогового профиля
**Описание.** Пользователь настраивает параметры для корректного расчета налогов согласно выбранной юрисдикции.

| Функция | Требования | 
|:---|:---|
| Выбор страны налогового резидентства | Пользователь выбирает между 🇷🇺 Россией и 🇧🇾 Беларусью. Система применяет соответствующие налоговые ставки и правила расчета |
| Настройка профиля для резидентов РФ | Указание ИНН, статуса (физлицо/ИП), ожидаемого годового дохода для применения ставки 13% или 15%, выбор налогового периода |
| Настройка профиля для резидентов РБ | Указание УНП (для ИП), выбор применения льготы до 10 000 BYN, настройка валюты учета (BYN), указание банковских реквизитов для отчетности |
| Сохранение настроек | Система должна сохранять все настройки профиля с возможностью изменения в течение налогового периода |

<a name="exchange_connection"/>

#### 3.1.1.3 Подключение к криптобиржам
**Описание.** Безопасное подключение к торговым аккаунтам пользователя для импорта данных.

| Функция | Требования | 
|:---|:---|
| Поддерживаемые биржи | Обязательная поддержка: Binance, ByBit, OKX. Дополнительно: Huobi, KuCoin. API подключения только в режиме чтения (read-only) |
| Подключение через API ключи | Пошаговые инструкции по созданию API ключей для каждой биржи. Проверка корректности ключей при подключении с уведомлением об ошибках |
| Безопасность подключений | Все API ключи шифруются AES-256 и привязываются к конкретному пользователю. Возможность отзыва и пересоздания подключений |
| Управление подключениями | Список всех активных подключений с указанием статуса, даты последней синхронизации и возможностью редактирования/удаления |

<a name="import_transactions"/>

#### 3.1.1.4 Импорт транзакций
**Описание.** Автоматический импорт всех торговых операций с подключенных платформ.

| Функция | Требования | 
|:---|:---|
| Типы импортируемых операций | Покупка (BUY), продажа (SELL), обмен (SWAP), депозит (DEPOSIT), вывод (WITHDRAWAL), майнинг (MINING), стейкинг (STAKING), P2P операции, комиссии |
| Автоматическая синхронизация | Ежедневная синхронизация в 00:00 по московскому времени. Ручная синхронизация по требованию. Уведомления о новых операциях |
| Импорт CSV файлов | Поддержка стандартных CSV форматов основных бирж для ручного импорта. Валидация данных и уведомление об ошибках формата |
| Дедупликация | Автоматическое исключение дублирующихся транзакций. Ведение журнала импорта для аудита изменений |

<a name="tax_calculation"/>

#### 3.1.1.5 Расчет налогов
**Описание.** Точный расчет налогооблагаемой базы согласно актуальному законодательству.

| Функция | Требования | 
|:---|:---|
| Расчет для резидентов РФ | Применение ставки НДФЛ 13% до 2,4 млн рублей и 15% свыше согласно ФЗ-418. Использование метода FIFO для определения себестоимости. Учет всех расходов, уменьшающих налоговую базу |
| Расчет для резидентов РБ | Ставка подоходного налога 13% с учетом необлагаемого минимума 10 000 BYN в год. Применение льготных периодов согласно белорусскому законодательству |
| Курсы валют | Использование официальных курсов ЦБ РФ и НБ РБ на дату каждой операции. Автоматическое получение исторических данных. Возможность ручной корректировки курсов |
| Учет комиссий и расходов | Включение торговых комиссий, комиссий за вывод средств, затрат на майнинг в расчет налоговой базы как уменьшающие доходы расходы |

<a name="report_generation"/>

#### 3.1.1.6 Генерация отчетов
**Описание.** Создание готовых документов для подачи в налоговые органы.

| Функция | Требования | 
|:---|:---|
| Справка для ФНС России | Генерация справки о доходах от операций с цифровыми активами в формате, соответствующем требованиям ФНС. Включение всех необходимых реквизитов и подписей |
| Отчет для Налогового комитета РБ | Формирование документов согласно формам и требованиям белорусского налогового законодательства с переводом сумм в белорусские рубли |
| Детализированный отчет | Подробный отчет со всеми операциями, расчетами курсов, применяемыми ставками и итоговыми суммами к доплате/возврату |
| Период отчетности | Возможность генерации отчетов за любой период: месяц, квартал, полугодие, год. Автоматическое формирование годовых отчетов |

<a name="export_documents"/>

#### 3.1.1.7 Экспорт документов
**Описание.** Сохранение всех документов в удобных для использования форматах.

| Функция | Требования | 
|:---|:---|
| Экспорт в PDF | Все налоговые справки и отчеты сохраняются в PDF формате с возможностью цифровой подписи. Оптимизация для печати на стандартных принтерах |
| Экспорт в Excel | Детализированные данные по операциям в формате XLSX с формулами для самостоятельного анализа. Отдельные листы для разных типов операций |
| Архивирование данных | Создание полного архива всех данных пользователя в ZIP формате. Возможность восстановления из архива при смене устройства |
| Печать документов | Оптимизированная верстка для прямой печати отчетов без потери форматирования. Предварительный просмотр перед печатью |

<a name="user_logout"/>

#### 3.1.1.8 Выход пользователя из учётной записи
**Описание.** Безопасное завершение пользовательской сессии.

| Функция | Требования | 
|:---|:---|
| Ручной выход | Кнопка выхода доступна на всех страницах приложения. Полная очистка сессии и временных данных при выходе |
| Автоматический выход | Принудительное завершение сессии после 24 часов неактивности. Предупреждение за 5 минут до автовыхода с возможностью продления |
| Завершение на всех устройствах | Возможность выйти из аккаунта на всех устройствах одновременно из настроек безопасности |

<a name="restrictions_and_exclusions"/>

### 3.1.2 Ограничения и исключения
1. **Географические ограничения**: Поддержка только российского и белорусского налогового законодательства
2. **Технические ограничения**: Работа только при наличии стабильного интернет-соединения
3. **Валютные ограничения**: Расчеты в рублях РФ и белорусских рублях как базовых валютах
4. **Биржевые ограничения**: Поддержка только основных международных криптобирж
5. **Правовые ограничения**: Система не предоставляет юридических консультаций и налогового планирования

<a name="non-functional_requirements"/>

## 3.2 Нефункциональные требования

<a name="quality_attributes"/>

### 3.2.1 Атрибуты качества

<a name="requirements_for_ease_of_use"/>

#### 3.2.1.1 Требования к удобству использования
1. **Интуитивность**: Интерфейс понятен пользователям без специальных знаний в налогообложении
2. **Обучаемость**: Освоение основных функций за 30 минут с помощью встроенных подсказок
3. **Мобильная адаптация**: Корректная работа на экранах от 320px с touch-оптимизацией
4. **Локализация**: Полная поддержка русского языка с возможностью добавления белорусского
5. **Доступность**: Соответствие WCAG 2.1 Level AA для пользователей с ограниченными возможностями

<a name="security_requirements"/>

#### 3.2.1.2 Требования к безопасности
1. **Шифрование данных**: AES-256 для всех персональных данных в базе данных
2. **API безопасность**: Хранение API ключей в зашифрованном виде с ограниченными правами доступа
3. **Аутентификация**: Обязательная двухфакторная аутентификация для доступа к налоговым данным
4. **Соответствие законодательству**: Полное соблюдение требований 152-ФЗ о защите персональных данных
5. **Аудит безопасности**: Логирование всех действий пользователей с временными метками
6. **Защита от атак**: Защита от SQL-инъекций, XSS, CSRF атак

<a name="performance_requirements"/>

#### 3.2.1.3 Требования к производительности
1. **Время отклика**: Загрузка страниц не более 3 секунд при нормальном интернет-соединении
2. **Синхронизация**: Импорт данных с одной биржи не более 2 минут
3. **Генерация отчетов**: Создание налогового отчета не более 30 секунд
4. **Пропускная способность**: Поддержка одновременной работы 500 активных пользователей
5. **Масштабируемость**: Возможность горизонтального масштабирования при росте нагрузки

<a name="access_requirements"/>

#### 3.2.1.4 Требования к доступности
1. **Время доступности**: Система доступна 99.5% времени (не более 36 часов простоя в год)
2. **Техническое обслуживание**: Плановые работы не более 2 часов в месяц с предварительным уведомлением
3. **Резервное копирование**: Автоматическое создание backup каждые 6 часов с хранением 30 дней
4. **Восстановление**: Время восстановления работы после сбоя не более 1 часа
5. **Мониторинг**: Круглосуточный мониторинг состояния системы с автоматическими уведомлениями

<a name="external_interfaces"/>

### 3.2.2 Внешние интерфейсы
1. **Браузерная совместимость**: Chrome 90+, Firefox 88+, Safari 14+, Edge 90+
2. **Мобильная поддержка**: Адаптивный дизайн для iOS 14+ и Android 8+
3. **Разрешения экранов**: Корректное отображение от 320px до 4K мониторов
4. **Языковая поддержка**: Русский язык (основной), планируется белорусский
5. **Доступность**: Поддержка скринридеров и клавиатурной навигации

<a name="restrictions"/>

### 3.2.3 Ограничения
1. **Платформа**: Веб-приложение с возможным развитием нативных мобильных версий
2. **Протоколы**: Исключительно HTTPS для всех соединений
3. **Поддержка**: Техническая поддержка только на русском языке
4. **Разработка**: В процессе разработки учебного проекта ввиду ограничесности ресурсов обязательной является выполнение первого и частично второго этапов разработки сервиса
