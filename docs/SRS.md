# CryptoTax Helper - Software Requirements Specification (SRS)

## Содержание

1. [Введение](#1-введение)
2. [Общее описание](#2-общее-описание)
3. [Специфические требования](#3-специфические-требования)
4. [Внешние интерфейсы](#4-внешние-интерфейсы)
5. [Нефункциональные требования](#5-нефункциональные-требования)
6. [Приложения](#6-приложения)

---

## 1. Введение

### 1.1 Назначение

Данный документ определяет требования к программному обеспечению "CryptoTax Helper" - налогового помощника для операций с криптовалютами, предназначенного для российских пользователей. Документ предназначен для разработчиков, тестировщиков, менеджеров проектов и заказчиков.

### 1.2 Область действия

CryptoTax Helper - веб-приложение для автоматического расчета налогов с криптовалютных операций в соответствии с российским законодательством (действующим с 2025 года). Система будет:

- Интегрироваться с популярными криптобиржами через API
- Автоматически отслеживать курсы криптовалют
- Рассчитывать налогооблагаемую базу по российскому законодательству
- Генерировать справки для подачи в налоговую службу

### 1.3 Определения, акронимы и сокращения

- **API** - Application Programming Interface (Программный интерфейс приложения)
- **ФНС** - Федеральная налоговая служба
- **НДФЛ** - Налог на доходы физических лиц
- **P2P** - Peer-to-peer (сделки между пользователями)
- **DeFi** - Децентрализованные финансы
- **CEX** - Централизованная биржа
- **DEX** - Децентрализованная биржа
- **FIFO** - First In, First Out (первым поступил - первым выбыл)
- **KYC** - Know Your Customer (знай своего клиента)

### 1.4 Ссылки

1. Федеральный закон № 418-ФЗ от 29.11.2024 о налогообложении цифровых валют
2. IEEE 830-1998 Standard for Software Requirements Specifications
3. ГОСТ 19.201-78 Техническое задание. Требования к содержанию и оформлению

### 1.5 Краткий обзор

Документ состоит из общего описания системы, детальных функциональных требований, требований к интерфейсам и нефункциональных характеристик. В приложениях содержатся дополнительные материалы для разработчиков.

---

## 2. Общее описание

### 2.1 Взаимодействие продукта

CryptoTax Helper является веб-приложением, которое взаимодействует с:

- **Криптовалютными биржами** (Binance, ByBit, OKX, Huobi, KuCoin) через REST API
- **Блокчейн-сетями** для получения данных о транзакциях
- **Внешними сервисами курсов** для получения исторических данных
- **Системой ФНС** (в перспективе) для автоматической подачи деклараций
- **Базой данных** для хранения пользовательских данных и настроек

### 2.2 Функции продукта

Основные функции системы:

1. **Импорт данных**
   - Подключение к биржам через API
   - Импорт CSV файлов с транзакциями
   - Импорт данных с блокчейна по адресам кошельков

2. **Обработка транзакций**
   - Классификация операций (покупка, продажа, обмен, майнинг, стейкинг)
   - Расчет налогооблагаемой базы по российскому законодательству
   - Учет курсов валют на момент операций

3. **Налоговые расчеты**
   - Расчет НДФЛ по ставкам 13%/15% для физических лиц
   - Учет льгот и освобождений
   - Расчет по методу FIFO

4. **Отчетность**
   - Генерация справок для ФНС
   - Экспорт в различные форматы (PDF, Excel)
   - Подготовка документов для подачи декларации

### 2.3 Характеристики пользователей

**Основная целевая аудитория:**
- Физические лица - инвесторы в криптовалюты
- Индивидуальные предприниматели
- Малые предприятия, работающие с криптовалютой

**Характеристики пользователей:**
- Базовые знания о налогообложении
- Опыт работы с криптобиржами
- Различный уровень технической грамотности
- Потребность в соблюдении российского налогового законодательства

### 2.4 Ограничения

1. **Правовые ограничения:**
   - Соответствие российскому законодательству о криптовалютах
   - Требования по защите персональных данных (152-ФЗ)

2. **Технические ограничения:**
   - Зависимость от API бирж
   - Ограничения на количество запросов к внешним сервисам
   - Необходимость интернет-соединения

3. **Операционные ограничения:**
   - Работа только с российским налоговым законодательством
   - Поддержка операций с основными криптовалютами

### 2.5 Допущения и зависимости

**Допущения:**
- Налоговое законодательство остается стабильным
- Биржи предоставляют корректные данные через API
- Пользователи имеют право доступа к своим торговым данным

**Зависимости:**
- Доступность API криптобирж
- Стабильность курсов валют от внешних провайдеров
- Изменения в налоговом законодательстве

---

## 3. Специфические требования

### 3.1 Функциональные требования

#### 3.1.1 Управление пользователями

**FR-001: Регистрация пользователя**
- Система должна позволять пользователям создавать учетную запись с использованием email и пароля
- Система должна отправлять подтверждение регистрации на email
- Пароль должен содержать минимум 8 символов, включая буквы и цифры

**FR-002: Аутентификация**
- Система должна поддерживать вход по email и паролю
- Система должна поддерживать двухфакторную аутентификацию (2FA)
- Система должна блокировать аккаунт на 30 минут после 5 неуспешных попыток входа

#### 3.1.2 Интеграция с биржами

**FR-003: Подключение API бирж**
- Система должна поддерживать подключение к следующим биржам: Binance, ByBit, OKX, Huobi, KuCoin
- Система должна использовать только read-only API ключи
- Система должна проверять валидность API ключей при подключении

**FR-004: Импорт торговой истории**
- Система должна автоматически импортировать все торговые операции пользователя
- Система должна обновлять данные при каждом запуске синхронизации
- Система должна сохранять историю импорта для аудита

#### 3.1.3 Обработка транзакций

**FR-005: Классификация операций**
- Система должна автоматически классифицировать операции по типам:
  - Покупка (BUY)
  - Продажа (SELL) 
  - Обмен (SWAP)
  - Депозит (DEPOSIT)
  - Вывод (WITHDRAWAL)
  - Майнинг (MINING)
  - Стейкинг (STAKING)
  - P2P операции

**FR-006: Расчет налогооблагаемой базы**
- Система должна рассчитывать налогооблагаемую базу согласно российскому законодательству
- Система должна применять курс валют на дату и время операции
- Система должна использовать метод FIFO для определения себестоимости

**FR-007: Учет льгот и освобождений**
- Система должна учитывать льготы для долгосрочных инвестиций
- Система должна применять необлагаемый минимум
- Система должна учитывать расходы, уменьшающие налоговую базу

#### 3.1.4 Генерация отчетов

**FR-008: Справка о доходах**
- Система должна генерировать справку о доходах от операций с криптовалютой
- Справка должна содержать все необходимые данные для подачи в ФНС
- Справка должна формироваться в формате PDF

**FR-009: Детализированный отчет**
- Система должна создавать детализированный отчет по всем операциям
- Отчет должен включать расчеты налогов по каждой операции
- Отчет должен быть доступен для экспорта в Excel

### 3.2 Бизнес-правила

**BR-001: Налоговые ставки**
- Для физических лиц ставка НДФЛ составляет 13% при доходе до 2,4 млн рублей в год
- При превышении 2,4 млн рублей ставка составляет 15% с суммы превышения
- Для юридических лиц ставка налога на прибыль составляет 25%

**BR-002: Момент возникновения налогового обязательства**
- Налоговое обязательство возникает в момент реализации криптовалюты
- Реализацией признается продажа, обмен или использование для оплаты

**BR-003: Определение стоимости**
- Стоимость криптовалюты определяется по курсу на момент операции
- Используются курсы с основных мировых бирж
- При отсутствии рыночного курса применяется экспертная оценка

---

## 4. Внешние интерфейсы

### 4.1 Пользовательские интерфейсы

**UI-001: Веб-интерфейс**
- Адаптивный дизайн для desktop и mobile устройств
- Поддержка браузеров: Chrome 90+, Firefox 88+, Safari 14+, Edge 90+
- Соответствие принципам UX/UI дизайна
- Поддержка русского языка

**UI-002: Основные экраны**
- Дашборд с обзором портфеля и налогов
- Экран управления подключениями к биржам
- Экран просмотра и редактирования транзакций
- Экран генерации отчетов
- Экран настроек пользователя

### 4.2 Программные интерфейсы

**SI-001: API криптобирж**
- REST API для получения торговой истории
- WebSocket для получения данных в реальном времени
- Аутентификация через API ключи с ограниченными правами

**SI-002: Блокчейн API**
- Интеграция с Etherscan API для Ethereum
- Интеграция с BSCScan для Binance Smart Chain
- Поддержка других популярных блокчейн-эксплореров

**SI-003: Курсы валют**
- Интеграция с CoinGecko API
- Интеграция с CoinMarketCap API
- Получение исторических курсов ЦБ РФ

### 4.3 Аппаратные интерфейсы

Система работает через веб-браузер и не требует специального оборудования.

### 4.4 Интерфейсы связи

- HTTPS для всех внешних соединений
- TLS 1.3 для шифрования данных
- WebSocket для real-time обновлений

---

## 5. Нефункциональные требования

### 5.1 Требования к производительности

**PF-001: Время отклика**
- Время загрузки страниц не должно превышать 3 секунды
- Время генерации отчетов не должно превышать 30 секунд
- Синхронизация с биржей должна завершаться в течение 5 минут

**PF-002: Пропускная способность**
- Система должна поддерживать одновременную работу 1000 пользователей
- Система должна обрабатывать до 100 000 транзакций в час

### 5.2 Требования к безопасности

**SF-001: Защита данных**
- Все персональные данные должны шифроваться в базе данных
- API ключи должны храниться в зашифрованном виде
- Система должна соответствовать требованиям 152-ФЗ

**SF-002: Аутентификация и авторизация**
- Обязательная двухфакторная аутентификация для доступа к данным
- Сессии должны истекать через 24 часа бездействия
- Логирование всех действий пользователей

### 5.3 Требования к надежности

**RL-001: Доступность**
- Система должна быть доступна 99.5% времени
- Плановые технические работы не более 4 часов в месяц
- Резервное копирование данных каждые 24 часа

**RL-002: Восстановление**
- Время восстановления системы не более 4 часов
- Автоматическое резервное копирование базы данных
- Возможность восстановления данных за последние 30 дней

### 5.4 Требования к удобству использования

**US-001: Интуитивность**
- Новый пользователь должен освоить базовый функционал за 15 минут
- Справочная система с пошаговыми инструкциями
- Подсказки для всех элементов интерфейса

**US-002: Доступность**
- Соответствие стандартам WCAG 2.1 Level AA
- Поддержка клавиатурной навигации
- Возможность увеличения шрифта до 200%

### 5.5 Другие требования

**OT-001: Совместимость**
- Система должна корректно работать в указанных браузерах
- Поддержка экранов с разрешением от 320px до 4K
- Совместимость с популярными PDF-ридерами

**OT-002: Масштабируемость**
- Архитектура должна позволять горизонтальное масштабирование
- Возможность добавления новых бирж без изменения кода
- Поддержка кластерной конфигурации

---

## 6. Приложения

### 6.1 Глоссарий

**Криптовалюта** - цифровая валюта, использующая криптографические методы для обеспечения безопасности транзакций

**Налогооблагаемая база** - стоимостная, физическая или иная характеристика объекта налогообложения

**API ключ** - уникальный идентификатор, используемый для аутентификации при обращении к API

**FIFO** - метод учета, при котором активы, поступившие первыми, списываются первыми

### 6.2 Диаграммы вариантов использования

*[Здесь должны быть размещены UML диаграммы use cases]*

### 6.3 Примеры экранов

*[Здесь должны быть размещены мокапы основных экранов приложения]*

### 6.4 Матрица трассировки требований

| Требование | Источник | Приоритет | Статус |
|------------|----------|-----------|---------|
| FR-001 | Бизнес-требования | Высокий | Не реализовано |
| FR-002 | Требования безопасности | Высокий | Не реализовано |
| ... | ... | ... | ... |

---

**Версия документа:** 1.0  
**Дата создания:** Сентябрь 2025  
**Авторы:** [Команда разработки CryptoTax Helper]  
**Статус:** Черновик  

---

*Данный документ является конфиденциальным и предназначен только для внутреннего использования командой проекта CryptoTax Helper.*